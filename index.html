<!DOCTYPE html>
<html>
<head>
    <title>Valen</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="icon" type="image/png" href="favicon.png">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        html, body {
            font-family: Arial, sans-serif;
            background-color: #222;
            color: #fff;
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden;
        }
        
        #chat-container {
            width: 100%;
            height: 100%;
            background-color: #333;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        #chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            -webkit-overflow-scrolling: touch;
        }
        
        .message {
            max-width: 80%;
            padding: 12px 15px;
            border-radius: 15px;
            margin-bottom: 10px;
            line-height: 1.4;
            word-wrap: break-word;
            font-size: 16px;
        }
        
        .user-message {
            background-color: #0b93f6;
            align-self: flex-end;
            color: white;
            border-bottom-right-radius: 5px;
        }
        
        .bot-message {
            background-color: #444;
            align-self: flex-start;
            color: white;
            border-bottom-left-radius: 5px;
        }
        
        #input-form {
            display: flex;
            border-top: 1px solid #555;
            padding: 10px;
            background-color: #333;
            width: 100%;
        }
        
        #user-input {
            flex: 1;
            padding: 12px 15px;
            border: none;
            border-radius: 20px;
            outline: none;
            font-size: 16px;
            background-color: #444;
            color: white;
            -webkit-appearance: none;
            appearance: none;
        }
        
        button {
            margin-left: 8px;
            padding: 0 15px;
            border: none;
            border-radius: 20px;
            background-color: #0b93f6;
            color: white;
            cursor: pointer;
            font-size: 16px;
            min-width: 60px;
            -webkit-appearance: none;
            appearance: none;
        }
        
        button:hover {
            background-color: #007bff;
        }
        
        /* Media Queries cho thiết bị di động */
        @media (max-width: 768px) {
            .message {
                max-width: 85%;
                padding: 10px 12px;
                font-size: 15px;
            }
            
            #user-input {
                padding: 10px 12px;
                font-size: 15px;
            }
            
            button {
                padding: 0 12px;
                font-size: 15px;
            }
        }
        
        @media (max-width: 480px) {
            #chat-messages {
                padding: 10px;
            }
            
            .message {
                max-width: 90%;
                padding: 8px 10px;
                margin-bottom: 8px;
                font-size: 14px;
            }
            
            #input-form {
                padding: 8px;
            }
            
            #user-input {
                padding: 8px 12px;
                font-size: 16px; /* Giữ cỡ chữ 16px để tránh zoom trên iOS */
            }
            
            button {
                padding: 8px 10px;
                font-size: 14px;
                min-width: 50px;
            }
        }
    </style>
</head>
<body>
    <div id="chat-container">
        <div id="chat-messages"></div>
        <form id="input-form">
            <input type="text" id="user-input" placeholder="Nhập tin nhắn..." autocomplete="off" inputmode="text">
            <button type="submit">Gửi</button>
        </form>
    </div>
    <script>
        // Xử lý khi người dùng gửi tin nhắn
        document.getElementById('input-form').addEventListener('submit', function(e) {
            e.preventDefault();
            sendMessage();
        });
        
        // Hàm xử lý gửi tin nhắn
        function sendMessage() {
            const userInput = document.getElementById('user-input');
            const message = userInput.value.trim();
            if (!message) return;
            
            addMessage('user', message);
            userInput.value = '';
            
            // Mô phỏng phản hồi từ bot (vì không có backend thực)
            setTimeout(function() {
                const botResponses = [
                    "Xin chào! Tôi có thể giúp gì cho bạn?",
                    "Cảm ơn bạn đã liên hệ. Đây là tin nhắn test.",
                    "Rất vui được trò chuyện với bạn!",
                    "Xin lỗi, tôi không hiểu. Bạn có thể nói rõ hơn không?"
                ];
                const randomResponse = botResponses[Math.floor(Math.random() * botResponses.length)];
                addMessage('bot', randomResponse);
            }, 1000);
            
            // Nếu có backend thực, bạn có thể mở comment phần code dưới đây:
            /*
            fetch('/chat', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ message })
            })
            .then(response => response.json())
            .then(data => {
                addMessage('bot', data.reply);
            })
            .catch(error => {
                console.error('Lỗi:', error);
                addMessage('bot', 'Có lỗi xảy ra. Vui lòng thử lại sau.');
            });
            */
        }
        
        // Thêm tin nhắn vào khung chat
        function addMessage(sender, message) {
            const chatMessages = document.getElementById('chat-messages');
            const messageElement = document.createElement('div');
            messageElement.className = `message ${sender}-message`;
            messageElement.textContent = message;
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Đảm bảo input luôn nhận focus khi nhấn vào nó
        document.getElementById('user-input').addEventListener('click', function() {
            this.focus();
        });

        // Khởi tạo với tin nhắn chào mừng
        window.onload = function() {
            setTimeout(function() {
                addMessage('bot', 'Xin chào! Tôi là Valen. Bạn cần giúp gì không?');
            }, 500);
            
            // Đặt focus vào input sau khi trang tải xong (có thể không hoạt động trên một số thiết bị di động)
            document.getElementById('user-input').focus();
        };
        
        // Xử lý để bàn phím xuất hiện khi nhấn vào input
        document.getElementById('user-input').addEventListener('touchstart', function(e) {
            this.focus();
        });
        
        // Sử dụng nút gửi làm nút kích hoạt bàn phím
        document.querySelector('button').addEventListener('touchstart', function() {
            document.getElementById('user-input').focus();
        });
    </script>
</body>
</html>
